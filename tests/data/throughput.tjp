/*
 * Issue #61: The "Sine Wave" Capacity Protocol
 * Tests variable daily throughput (batch capacity changes per day)
 * Weekly pattern: 2h, 4h, 8h, 16h, 8h, 4h, 2h = 44h/week
 */

project "Data_Tsunami" 2025-09-01 +1m {
  timezone "Etc/UTC"
  timeformat "%Y-%m-%d %H:%M"
  now 2025-09-01
}

shift variable_throughput "Variable" {
  workinghours mon 09:00 - 11:00
  workinghours tue 09:00 - 13:00
  workinghours wed 09:00 - 17:00
  workinghours thu 06:00 - 22:00
  workinghours fri 09:00 - 17:00
  workinghours sat 09:00 - 13:00
  workinghours sun 09:00 - 11:00
}

resource server_cluster "Cluster X" {
  workinghours variable_throughput
}

task processing "Ingest 100TB" {
  effort 100h
  allocate server_cluster
  start 2025-09-01-09:00
}

taskreport throughput_output "throughput_output" {
  formats csv
  columns id, start, end, effort, duration
  timeformat "%Y-%m-%d-%H:%M"
}
